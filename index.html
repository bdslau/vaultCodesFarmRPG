// Info-phase: first 3 guesses should cover many digits.
// Use remaining candidates if "Restrict suggestions" is ON, otherwise allow full space.
if (guessCount < 3) {
  const restrict = DOM.restrict.checked;
  const pool = (restrict && remaining.length > 0) ? remaining : ALL;
  let best = null;
  let bestScore = -1;
  for (const c of pool) {
    if (history.some(h => h.guess === c)) continue; // avoid repeats
    const digits = Array.from(new Set(c.split('')));
    let newDigits = 0;
    for (const d of digits) if (!testedDigits.has(d)) newDigits++;
    const score = newDigits * 10 + digits.length;
    if (score > bestScore) {
      bestScore = score;
      best = c;
    }
  }
  if (best) {
    setSuggestion(best, `Info-guess (covers ${best.split('').filter((v,i,a)=>a.indexOf(v)===i).length} unique digits).`);
  } else {
    setSuggestion(remaining[0] || ALL[0], 'Fallback to first remaining.');
  }
  return;
}
